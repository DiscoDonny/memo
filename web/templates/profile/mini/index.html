{{ $identiconId := getUnique 6 }}
<div class="title">
    <div class="pic">
    {{ if .Profile.Pic }}
        <a class="image-link"
           href="/img/profilepics/{{ .Profile.GetAddressString }}-640x640.{{ .Profile.Pic.GetExtension }}?id={{ .Profile.Pic.Id }}"
           target="_blank">
            <img class="profile-pic"
                 src="/img/profilepics/{{ .Profile.GetAddressString }}-128x128.{{ .Profile.Pic.GetExtension }}?id={{ .Profile.Pic.Id }}"/>
        </a>
    {{ else }}
        <span class="profile-identicon-{{ $identiconId }}">
            <img class="identicon"/>
        </span>
    {{ end }}
    </div>
    <div class="name-follow">
        <h3>
        {{ .Profile.Name }}
        {{ if .Profile.Reputation }}
        {{ template "snippets/reputation.html" .Profile.Reputation }}
        {{ if .Profile.IsSelf }}
            <span style="font-size:12px;">This is you!</span>
        {{ end }}
        {{ end }}
        </h3>
    {{ if .Profile.CanFollow }}
        <span>
            <a class="btn btn-sm btn-primary"
               href="memo/follow/{{ .Profile.GetAddressString }}">{{ T "follow" 1 }}</a>
        </span>
    {{ else if .Profile.CanUnfollow }}
        <span>
            <a class="btn btn-sm btn-default"
               href="memo/unfollow/{{ .Profile.GetAddressString }}">{{ T "unfollow" }}</a>
        </span>
    {{ end }}
    </div>
</div>
<div class="body">
{{ .Profile.GetText }}
</div>
<table class="profile-counts">
    <tbody>
    <tr>
        <td>
            <p>{{ T "Actions" }}</p>
            <p>###</p>
        </td>
        <td>
            <p>{{ T "following" }}</p>
            <p>{{ .Profile.FollowingCount }}</p>
        </td>
        <td>
            <p>{{ T "followers" }}</p>
            <p>{{ .Profile.FollowerCount }}</p>
        </td>
    </tr>
    </tbody>
</table>

<script type="text/javascript">
    (function () {
        var foreground = {{ if eq .UserSettings.Theme "dark" }}[224, 224, 224, 255]{{ else }}[180, 180, 180, 255]{{ end }};
        var background = [0, 0, 0, 0];
        var data = new Identicon('{{ .Profile.GetAddressString }}', {
            foreground: foreground,
            background: background,
            size: 128,
            margin: 0
        }).toString();
        $(".profile-identicon-{{ $identiconId }}").html('<img class="identicon" src="data:image/png;base64,' + data + '">');
    })();
</script>
